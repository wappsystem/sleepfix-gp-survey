<div id=D__ID>
    <!--third html start -->
    <div class="container mt-95 mb-3">
        <div class="row">
            <div class="col-12 col-lg-9 col-md-11 col-sm-12 mx-auto formbox">
                <div class="row">
                    <div class="col-12">
                        <form id=F__ID>
                            <h3>CONTACT DETAILS</h3>
                            <!-- participant part for all tsak forms -------------------->
                            <div class="row row__ID" id=row_participant__ID style="display:none">
                                <div class="col-sm-9 col-lg-9 input__ID">
                                    <span class=label__ID>Participant</span><br>
                                    <input type=text name="Participant" class=form-control id=Participant__ID
                                        data-id="Participant" />
                                </div>
                                <div class="col-sm-3 col-lg-3 input__ID">
                                    <span class=label__ID>Participant ID</span><br>
                                    <input type=text name="Participant_uid" class=form-control readonly />
                                </div>
                                <hr style="border-top: 1px solid #888;width: 100%;margin:10px 0">
                            </div>
                            <div style='max-width:800px;margin-left:auto;margin-right:auto;'>
                                <div class="form-group">
                                    <div class="questiongroup ">
                                        <fieldset class="subquestions">
                                            <label><span class="">First name</span>
                                                <input class="form-control" type="text" name="first_name" required>
                                            </label><br>
                                            <label><span class="">Last name</span>
                                                <input class="form-control" type="text" name="last_name" required>
                                            </label><br>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="questiongroup ">
                                        <fieldset class="subquestions">
                                            <label><span class="">Phone number</span>
                                                <input type="tel" class="form-control" name="phone"
                                                    id="mobileNumber__ID" required placeholder="XXXX-XXX-XXX"
                                                    >
                                            </label><br>
                                            <label class="checkboxes">
                                                <input type="checkbox" name="sms" checked>
                                                <span class="check_checkmark"></span> I want to have sms alert when an email has been sent.
                                            </label><br>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <label style="width:100%"><span class="">Email</span>
                                                <input class="form-control" type="email" name="email" required >
                                            </label><br>
                                            <label style="width:100%"><span class="">Email Confirmation</span>
                                                <input class="form-control" type="email" name="email_conf" required >
                                            </label><br>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="questiongroup ">
                                        <fieldset class="">
                                            <label style="width:100%"><span class="">Address</span>
                                                <input class="form-control" type="text" name="address" required >
                                            </label>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="questiongroup ">
                                        <fieldset class="subquestions">
                                            <label><span class="">Suburb</span>
                                                <input class="form-control" type="text" name="suburb" required >
                                            </label><br>
                                            <label><span class="">Postcode</span>
                                                <input class="form-control" type="text" name="postcode" required >
                                            </label><br>
                                            <label><span class="">State</span>
                                                <select name="state" class="form-control" required >
                                                        <option value="NSW">NSW</option>
                                                        <option value="NT">NT</option>
                                                        <option value="SA">SA</option>
                                                        <option value="QLD">QLD</option>
                                                        <option value="TAS">TAS</option>
                                                        <option value="VIC">VIC</option>
                                                        <option value="WA">WA</option>
                                                  </select>                            
                                            </label><br>
                                        </fieldset>
                                    </div>
                                </div>
                                <div style="text-align:right">
                                    <button type="submit" id="submit__ID" class="btn btn-primary btn-lg">Next</button>
                                </div>
                                <div class="form-group">
                                    <div class="questiongroup ">
                                        <fieldset class="subquestions" style="display:none">
                                            <label><span class="">Sequence Number</span>
                                                <input class="form-control" type="text" name="sequence_no" >
                                            </label><br>
                                            <label><span class="">Access Code</span>
                                                <input class="form-control" type="text" name="access_code" >
                                            </label><br>
                                        </fieldset>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function F__ID() {
            //-------------------------------------
            VmInclude: __COMPONENT__/f/form.01.js
            VmInclude: __CURRENT_PATH__/shared-form.js
            //-------------------------------------
            m.default_load = m.load;
            m.load = function () {
                m.default_load();
                $('#D__ID').scrollTop(0);
                $(window).scrollTop(0);
                m.input.goback = 1;
                console.log(JSON.stringify($vm.part_user))
/*
				var I1 = $('#F__ID input[name=sequence_no').val();
				if (I1 == '') {
					$vm.request({ cmd: "find", table: m.Table, sort: { I1: -1 }, skip: 0, limit: 1 }, function (res) {
						if (res.sys.permission == false) {
							$vm.alert("No permission. Private database table, ask the table's owner for permissions.");
							return;
						}
						var max_I1 = 0;
						if (res.result.length > 0) {
							if (res.result[0].I1 !== undefined) max_I1 = res.result[0].I1
						}
						max_I1++;
                        $('#F__ID input[name=sequence_no').val(max_I1);
                        var tb=$vm.module_list['access-code-data'].Table;
                        var qry={UID:max_I1}
                        $vm.request({ cmd: "find", table:tb, query:qry, skip: 0, limit: 1 }, function (res) {
                            if(res.result.length>0) $('#F__ID input[name=access_code').val(res.result[0].Data.Access_Code);
                            else $vm.alert("We are so sorry we have run out of Access codes")
                        })
                        
					})
                }
                */
            }
            //--------------------------------------------------------
            $('#mobileNumber__ID').keyup(function(e){
                var ph = this.value.replace(/\D/g,'').substring(0,10);
                // Backspace and Delete keys
                var deleteKey = (e.keyCode == 8 || e.keyCode == 46);
                var len = ph.length;
                if(len==0){
                    ph=ph;
                }else if(len<4){
                    ph=ph;
                }else if(len==4){
                    ph = ph + (deleteKey ? '' : '-');
                }else if(len<7){
                    ph=ph.substring(0,4)+'-'+ph.substring(4,7);
                }else if(len==7){
                    ph=ph.substring(0,4)+'-'+ph.substring(4,7)+ (deleteKey ? '' : '-');
                }else{
                    ph=ph.substring(0,4)+'-'+ph.substring(4,7)+'-'+ph.substring(7,10);
                }
                this.value = ph;
            });            
            //--------------------------------------------------------
            $('#D__ID').css('min-height', $vm.min_height);
            //--------------------------------------------------------
            $(this).scrollTop(0);
            //-------------------------------------
			var before_submit = m.before_submit;
			m.before_submit = function (data, index) {
                //var I1 = $('#F__ID input[name=sequence_no').val(); if (I1 != '' && I1 != '-') index.I1 = parseInt(I1);
				return before_submit(data, index);
			}
            //-------------------------------------
            m.after_insert = function (data, res) {
                if($vm.oq=='bl'){
                    console.log('A')
                    $vm.load_module_v2(m.prefix + 'after-screening', '', {p_uid:m.input.p_uid});
                }
                else{
                    console.log('B')
                    $vm.load_module_v2(m.prefix + 'w6-quesstionnaire', '', {p_uid:m.input.p_uid});
                }
            }
			//-------------------------------------
        }
    </script>
    <style>
        VmInclude:__CURRENT_PATH__/wappsystem-form.css
    </style>
</div>